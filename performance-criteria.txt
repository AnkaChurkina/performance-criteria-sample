Критерии работоспособности

Метрика: 

Количество операций в единицу времени 

Критерий: 

В течение 5 минут должно быть не менее 3000 операций 

Причины срабатывания 

Сетевые проблемы на нашей стороне. Скорее всего будет деградация по всем клиентам 

Проблемы у конкретных клиентов. Или от них совсем ничтожный траффик. Или наш файервол шалит. 

 

Метрика: 

Сумма операций в единицу времени в разное время дня 

Критерий: 

В период 10-20 МСК сумма операций в течение 5 минут должна быть не менее 3 000 000 руб. 

Причины срабатывания 

Проблемы у клиентов, недостаточно траффика, поэтому недостаточно денег 

На нашей стороне проблемы при обработке платежей, средства не зачисляются. 

 

Метрика: 

Количество успешных запросов типа А соответствует количеству успешных запросов типа Б 

Критерий: 

Успешных запросов типа А не менее 3000 в течение 5 минут, успешных запросов типа Б не менее 3000 в течение 5 минут и количество запросов типа Б отличается не более чем на 10% от количества запросов типа А 

Причины срабатывания: 

Имеет смысл, когда запрос А и запрос Б - часть одного сценария. Если их число не соответствует, означает, что сценарий не отрабатывает корректно, клиенты не получают сервис. 

 

 

Метрика 

Количество ошибок “Неизвестный клиент”, “Ошибка аутентификации” 

Критерий 

Количество ошибок “Неизвестный клиент”, “Ошибка аутентификации” не более 10 в течение часа 

Причины срабатывания: 

Да, случается, клиенты ошибаются при вводе данных, нельзя бросать всё из-за единичных ошибок. Однако массовые ошибки могут свидетельствовать о попытках мошенничества или взлома. 

 

Метрика 

Количество ошибок “Невозможно расшифровать данные”  

Критерий 

Не более 50 ошибок в час 

Причины срабатывания: 

Анализируем в разрезе клиента. Конкретный клиент неверно шифрует данные. Например, использует недопустимый алгоритм. Нужно срочно связаться с клиентом! 

Участились ошибки среди разных клиентов. Возможно, значительно увеличился траффик от этих клиентов и критерий нужно скорректировать. Или переформулировать метрику из абсолютной в относительную: “% от общего числа операций завершаются ошибкой “Невозможно расшифровать данные”” 

Выкатили новый патч, а в нем изменилась версия языка или стали использовать новую версию библиотеки  

 

Критерий 

Наличие ошибок “Не найден ключ”, “Неверный тип ключа” (сервис использует статические ключи) 

Метрика 

Хотя бы одна ошибка 

Причины: 

У нас либо отсутствует, либо загружен ключ неверного типа. 
Под рукой всегда должно быть руководство по криптографии. 

 

Критерий 

Количество ошибок “Не найден ключ”, “Неверный тип ключа” (сервис использует динамические ключи) 

Метрика 

Не более 0,5% появления ошибок 

Причины: 

Возможно, клиент ссылается на несуществующую сессию. Надо посмотреть, что у него с отработкой сценария 

Проблемы с хранилищем сессии (например, hazelcast). Например, во время создания сессии эфемерный ключ по какой-то причине не сохраняется. 